<?xml version="1.0" encoding="UTF-8"?>
<formidable version="0.7.0">
  <meta>
    <name>Editing form for feusers</name>
    <form formid="registration"/>
    <debug>false</debug>
        <displaylabels>true</displaylabels>
    </meta>
    <control>
        <datahandler:DB>
            <tablename>fe_users</tablename>
            <keyname>uid</keyname>
            <process>
              <beforeinsertion>
                  <userobj>
                      <extension>this</extension>
                      <method>handleBeforeUpdateDB</method>
                  </userobj>
              </beforeinsertion>
              <afterinsertion>
                  <userobj>
                      <extension>this</extension>
                      <method>handleUpdateDB</method>
                  </userobj>
              </afterinsertion>
            </process>
        </datahandler:DB>

        <!-- renderer:TEMPLATE>
            <template subpart="###REGISTRATIONFORM###">
                <errortag>formerrors</errortag>
                <path>EXT:...html</path>
            </template>
        </renderer:TEMPLATE-->
      <renderer:STANDARD/>
    </control>

    <elements>
        <renderlet:BOX name="EDITION-BOX">
            <childs>


                <renderlet:PASSWORD name="password123" label="LABEL_form_password">
                </renderlet:PASSWORD>

                <renderlet:PASSWORD name="password123_confirm" label="LABEL_form_password_confirm">
                    <renderonly>true</renderonly>
                    <confirm>EDITION-BOX__password123</confirm>
                    <validators>
                        <validator:STANDARD>
                            <sameas>
                                <value>EDITION-BOX__password123</value>
                                <message>LLL:EXT:t3users/locallang.php:msg_form_password_sameas</message>
                            </sameas>
                        </validator:STANDARD>
                    </validators>
                </renderlet:PASSWORD>

                <renderlet:RADIOBUTTON name="gender" label="LABEL_form_gender">
                	<data>
                		<items>
                			<item caption="LABEL_form_gender_mr" value="0"/>
                			<item caption="LABEL_form_gender_mrs" value="1"/>
                		</items>
                	</data>
                </renderlet:RADIOBUTTON>

                <renderlet:TEXT name="first_name" label="LABEL_form_firstname" />
                <renderlet:TEXT name="last_name" label="LABEL_form_lastname" />

                <renderlet:DATE name="date_of_birth" label="LABEL_form_birthdate">
                    <data>
                        <datetime format="%d.%m.%Y" allowmanualedition="true" />
                    </data>
                </renderlet:DATE>

                <renderlet:TEXT name="address" label="LABEL_form_address" />
                <renderlet:TEXT name="zip" label="LABEL_form_zip" />
                <renderlet:TEXT name="city" label="LABEL_form_city" />

                <renderlet:TEXT name="email" label="LABEL_form_email">
                    <validators>
                        <validator:STANDARD>
                            <required message="Es muss eine Emailadresse angegeben werden."/>
                            <email message="Die Emailadresse ist nicht gültig."/>
                        </validator:STANDARD>
                        <validator:DB>
                            <!-- deleted="TRUE" -> gelöschte Datensätze ausschließen -->
                            <unique
                                message="Die angegebene Emailadresse wird bereits von einem anderen Mitglied verwendet!"
                                deleted="TRUE"
                            />
                        </validator:DB>
                    </validators>
                </renderlet:TEXT>

                <renderlet:SUBMIT name="btnsubmit" label="LABEL_btn_save"/>
            </childs>
        </renderlet:BOX>
    </elements>
</formidable>
